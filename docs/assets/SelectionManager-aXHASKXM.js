import{r as d,R as x}from"./index-DVXBtNgz.js";import{r as ae}from"./index-BAqkEV4U.js";import{$ as Se}from"./FocusScope-D1zDAIyn.js";import{f as Z,j as te}from"./focusSafely-ZnAb2dR5.js";import{a as W,h as ue}from"./utils-Bc7mYRVy.js";import{g as be,a as Ke,d as ie}from"./platform-Dv8lzYqa.js";import{$ as de,d as $e}from"./openLink-D2-6eagY.js";import{$ as xe}from"./useEvent-DwNTJlgs.js";import{$ as we,a as le}from"./scrollIntoView-u9iNRODo.js";import{$ as Ce}from"./context-N9YhJwDt.js";import{d as ke,b as fe}from"./useFocusRing-Dauh53Lh.js";import{$ as De}from"./useDescription-CXCjjmiS.js";import{$ as Pe}from"./useControlledState-DO5k2rCg.js";const Ee=500;function Me(l){let{isDisabled:e,onLongPressStart:t,onLongPressEnd:i,onLongPress:n,threshold:s=Ee,accessibilityDescription:r}=l;const a=d.useRef();let{addGlobalListener:u,removeGlobalListener:v}=ke(),{pressProps:p}=fe({isDisabled:e,onPressStart(f){if(f.continuePropagation(),(f.pointerType==="mouse"||f.pointerType==="touch")&&(t&&t({...f,type:"longpressstart"}),a.current=setTimeout(()=>{f.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),n&&n({...f,type:"longpress"}),a.current=void 0},s),f.pointerType==="touch")){let y=D=>{D.preventDefault()};u(f.target,"contextmenu",y,{once:!0}),u(window,"pointerup",()=>{setTimeout(()=>{v(f.target,"contextmenu",y)},30)},{once:!0})}},onPressEnd(f){a.current&&clearTimeout(a.current),i&&(f.pointerType==="mouse"||f.pointerType==="touch")&&i({...f,type:"longpressend"})}}),g=De(n&&!e?r:void 0);return{longPressProps:W(p,g)}}function J(l){return be()?l.altKey:l.ctrlKey}function N(l){return Ke()?l.metaKey:l.ctrlKey}const Fe=1e3;function Te(l){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:i}=l,n=d.useRef({search:"",timeout:null}).current,s=r=>{let a=Ae(r.key);if(!a||r.ctrlKey||r.metaKey||!r.currentTarget.contains(r.target))return;a===" "&&n.search.trim().length>0&&(r.preventDefault(),"continuePropagation"in r||r.stopPropagation()),n.search+=a;let u=e.getKeyForSearch(n.search,t.focusedKey);u==null&&(u=e.getKeyForSearch(n.search)),u!=null&&(t.setFocusedKey(u),i&&i(u)),clearTimeout(n.timeout),n.timeout=setTimeout(()=>{n.search=""},Fe)};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?s:null}}}function Ae(l){return l.length===1||!/^[A-Z]/i.test(l)?l:""}function bt(l){let{selectionManager:e,keyboardDelegate:t,ref:i,autoFocus:n=!1,shouldFocusWrap:s=!1,disallowEmptySelection:r=!1,disallowSelectAll:a=!1,selectOnFocus:u=e.selectionBehavior==="replace",disallowTypeAhead:v=!1,shouldUseVirtualFocus:p,allowsTabNavigation:g=!1,isVirtualized:f,scrollRef:y=i,linkBehavior:D="action"}=l,{direction:w}=Ce(),m=de(),P=o=>{if(o.altKey&&o.key==="Tab"&&o.preventDefault(),!i.current.contains(o.target))return;const S=(h,L)=>{if(h!=null){if(e.isLink(h)&&D==="selection"&&u&&!J(o)){ae.flushSync(()=>{e.setFocusedKey(h,L)});let O=y.current.querySelector(`[data-key="${CSS.escape(h.toString())}"]`),ee=e.getItemProps(h);m.open(O,o,ee.href,ee.routerOptions);return}if(e.setFocusedKey(h,L),e.isLink(h)&&D==="override")return;o.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(h):u&&!J(o)&&e.replaceSelection(h)}};switch(o.key){case"ArrowDown":if(t.getKeyBelow){var C,$;o.preventDefault();let h=e.focusedKey!=null?t.getKeyBelow(e.focusedKey):(C=t.getFirstKey)===null||C===void 0?void 0:C.call(t);h==null&&s&&(h=($=t.getFirstKey)===null||$===void 0?void 0:$.call(t,e.focusedKey)),S(h)}break;case"ArrowUp":if(t.getKeyAbove){var M,F;o.preventDefault();let h=e.focusedKey!=null?t.getKeyAbove(e.focusedKey):(M=t.getLastKey)===null||M===void 0?void 0:M.call(t);h==null&&s&&(h=(F=t.getLastKey)===null||F===void 0?void 0:F.call(t,e.focusedKey)),S(h)}break;case"ArrowLeft":if(t.getKeyLeftOf){var U,c;o.preventDefault();let h=t.getKeyLeftOf(e.focusedKey);h==null&&s&&(h=w==="rtl"?(U=t.getFirstKey)===null||U===void 0?void 0:U.call(t,e.focusedKey):(c=t.getLastKey)===null||c===void 0?void 0:c.call(t,e.focusedKey)),S(h,w==="rtl"?"first":"last")}break;case"ArrowRight":if(t.getKeyRightOf){var T,G;o.preventDefault();let h=t.getKeyRightOf(e.focusedKey);h==null&&s&&(h=w==="rtl"?(T=t.getLastKey)===null||T===void 0?void 0:T.call(t,e.focusedKey):(G=t.getFirstKey)===null||G===void 0?void 0:G.call(t,e.focusedKey)),S(h,w==="rtl"?"last":"first")}break;case"Home":if(t.getFirstKey){o.preventDefault();let h=t.getFirstKey(e.focusedKey,N(o));e.setFocusedKey(h),N(o)&&o.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(h):u&&e.replaceSelection(h)}break;case"End":if(t.getLastKey){o.preventDefault();let h=t.getLastKey(e.focusedKey,N(o));e.setFocusedKey(h),N(o)&&o.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(h):u&&e.replaceSelection(h)}break;case"PageDown":if(t.getKeyPageBelow){o.preventDefault();let h=t.getKeyPageBelow(e.focusedKey);S(h)}break;case"PageUp":if(t.getKeyPageAbove){o.preventDefault();let h=t.getKeyPageAbove(e.focusedKey);S(h)}break;case"a":N(o)&&e.selectionMode==="multiple"&&a!==!0&&(o.preventDefault(),e.selectAll());break;case"Escape":!r&&e.selectedKeys.size!==0&&(o.stopPropagation(),o.preventDefault(),e.clearSelection());break;case"Tab":if(!g){if(o.shiftKey)i.current.focus();else{let h=Se(i.current,{tabbable:!0}),L,O;do O=h.lastChild(),O&&(L=O);while(O);L&&!L.contains(document.activeElement)&&ie(L)}break}}},b=d.useRef({top:0,left:0});xe(y,"scroll",f?null:()=>{b.current={top:y.current.scrollTop,left:y.current.scrollLeft}});let K=o=>{if(e.isFocused){o.currentTarget.contains(o.target)||e.setFocused(!1);return}if(o.currentTarget.contains(o.target)){if(e.setFocused(!0),e.focusedKey==null){let $=F=>{F!=null&&(e.setFocusedKey(F),u&&e.replaceSelection(F))},M=o.relatedTarget;var S,C;M&&o.currentTarget.compareDocumentPosition(M)&Node.DOCUMENT_POSITION_FOLLOWING?$((S=e.lastSelectedKey)!==null&&S!==void 0?S:t.getLastKey()):$((C=e.firstSelectedKey)!==null&&C!==void 0?C:t.getFirstKey())}else f||(y.current.scrollTop=b.current.top,y.current.scrollLeft=b.current.left);if(!f&&e.focusedKey!=null){let $=y.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);$&&($.contains(document.activeElement)||ie($),te()==="keyboard"&&le($,{containingElement:i.current}))}}},E=o=>{o.currentTarget.contains(o.relatedTarget)||e.setFocused(!1)};const A=d.useRef(n);d.useEffect(()=>{if(A.current){let o=null;n==="first"&&(o=t.getFirstKey()),n==="last"&&(o=t.getLastKey());let S=e.selectedKeys;if(S.size){for(let C of S)if(e.canSelectItem(C)){o=C;break}}e.setFocused(!0),e.setFocusedKey(o),o==null&&!p&&Z(i.current)}},[]);let I=d.useRef(e.focusedKey);d.useEffect(()=>{let o=te();if(e.isFocused&&e.focusedKey!=null&&(y!=null&&y.current)){let S=y.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);S&&(o==="keyboard"||A.current)&&(f||we(y.current,S),o!=="virtual"&&le(S,{containingElement:i.current}))}e.isFocused&&e.focusedKey==null&&I.current!=null&&Z(i.current),I.current=e.focusedKey,A.current=!1},[f,y,e.focusedKey,e.isFocused,i]);let R={onKeyDown:P,onFocus:K,onBlur:E,onMouseDown(o){y.current===o.target&&o.preventDefault()}},{typeSelectProps:q}=Te({keyboardDelegate:t,selectionManager:e});v||(R=W(q,R));let B;return p||(B=e.focusedKey==null?0:-1),{collectionProps:{...R,tabIndex:B}}}function Kt(l){let{selectionManager:e,key:t,ref:i,shouldSelectOnPressUp:n,shouldUseVirtualFocus:s,focus:r,isDisabled:a,onAction:u,allowsDifferentPressOrigin:v,linkBehavior:p="action"}=l,g=de(),f=c=>{if(c.pointerType==="keyboard"&&J(c))e.toggleSelection(t);else{if(e.selectionMode==="none")return;if(e.isLink(t)){if(p==="selection"){let T=e.getItemProps(t);g.open(i.current,c,T.href,T.routerOptions),e.setSelectedKeys(e.selectedKeys);return}else if(p==="override"||p==="none")return}e.selectionMode==="single"?e.isSelected(t)&&!e.disallowEmptySelection?e.toggleSelection(t):e.replaceSelection(t):c&&c.shiftKey?e.extendSelection(t):e.selectionBehavior==="toggle"||c&&(N(c)||c.pointerType==="touch"||c.pointerType==="virtual")?e.toggleSelection(t):e.replaceSelection(t)}};d.useEffect(()=>{t===e.focusedKey&&e.isFocused&&!s&&(r?r():document.activeElement!==i.current&&Z(i.current))},[i,t,e.focusedKey,e.childFocusStrategy,e.isFocused,s]),a=a||e.isDisabled(t);let y={};!s&&!a?y={tabIndex:t===e.focusedKey?0:-1,onFocus(c){c.target===i.current&&e.setFocusedKey(t)}}:a&&(y.onMouseDown=c=>{c.preventDefault()});let D=e.isLink(t)&&p==="override",w=e.isLink(t)&&p!=="selection"&&p!=="none",m=!a&&e.canSelectItem(t)&&!D,P=(u||w)&&!a,b=P&&(e.selectionBehavior==="replace"?!m:!m||e.isEmpty),K=P&&m&&e.selectionBehavior==="replace",E=b||K,A=d.useRef(null),I=E&&m,R=d.useRef(!1),q=d.useRef(!1),B=c=>{if(u&&u(),w){let T=e.getItemProps(t);g.open(i.current,c,T.href,T.routerOptions)}},o={};n?(o.onPressStart=c=>{A.current=c.pointerType,R.current=I,c.pointerType==="keyboard"&&(!E||se())&&f(c)},v?(o.onPressUp=b?null:c=>{c.pointerType!=="keyboard"&&m&&f(c)},o.onPress=b?B:null):o.onPress=c=>{if(b||K&&c.pointerType!=="mouse"){if(c.pointerType==="keyboard"&&!ne())return;B(c)}else c.pointerType!=="keyboard"&&m&&f(c)}):(o.onPressStart=c=>{A.current=c.pointerType,R.current=I,q.current=b,m&&(c.pointerType==="mouse"&&!b||c.pointerType==="keyboard"&&(!P||se()))&&f(c)},o.onPress=c=>{(c.pointerType==="touch"||c.pointerType==="pen"||c.pointerType==="virtual"||c.pointerType==="keyboard"&&E&&ne()||c.pointerType==="mouse"&&q.current)&&(E?B(c):m&&f(c))}),y["data-key"]=t,o.preventFocusOnPress=s;let{pressProps:S,isPressed:C}=fe(o),$=K?c=>{A.current==="mouse"&&(c.stopPropagation(),c.preventDefault(),B(c))}:void 0,{longPressProps:M}=Me({isDisabled:!I,onLongPress(c){c.pointerType==="touch"&&(f(c),e.setSelectionBehavior("toggle"))}}),F=c=>{A.current==="touch"&&R.current&&c.preventDefault()},U=e.isLink(t)?c=>{$e.isOpening||c.preventDefault()}:void 0;return{itemProps:W(y,m||b?S:{},I?M:{},{onDoubleClick:$,onDragStartCapture:F,onClick:U}),isPressed:C,isSelected:e.isSelected(t),isFocused:e.isFocused&&e.focusedKey===t,isDisabled:a,allowsSelection:m,hasAction:E}}function ne(){let l=window.event;return(l==null?void 0:l.key)==="Enter"}function se(){let l=window.event;return(l==null?void 0:l.key)===" "||(l==null?void 0:l.code)==="Space"}class Ie{build(e,t){return this.context=t,re(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:i}=e;if(typeof t=="function"){if(!i)throw new Error("props.children was a function but props.items is missing");for(let n of e.items)yield*this.getFullNode({value:n},{renderer:t})}else{let n=[];x.Children.forEach(t,r=>{n.push(r)});let s=0;for(let r of n){let a=this.getFullNode({element:r,index:s},{});for(let u of a)s++,yield u}}}getKey(e,t,i,n){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${n}${t.key}`;let s=t.value;if(s!=null){var r;let a=(r=s.key)!==null&&r!==void 0?r:s.id;if(a==null)throw new Error("No key found for item");return a}return n?`${n}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,i,n){let s=e.element;if(!s&&e.value&&t&&t.renderer){let u=this.cache.get(e.value);if(u&&(!u.shouldInvalidate||!u.shouldInvalidate(this.context))){u.index=e.index,u.parentKey=n?n.key:null,yield u;return}s=t.renderer(e.value)}if(x.isValidElement(s)){let u=s.type;if(typeof u!="function"&&typeof u.getCollectionNode!="function"){let f=typeof s.type=="function"?s.type.name:s.type;throw new Error(`Unknown element <${f}> in collection.`)}let v=u.getCollectionNode(s.props,this.context),p=e.index,g=v.next();for(;!g.done&&g.value;){let f=g.value;e.index=p;let y=f.key;y||(y=f.element?null:this.getKey(s,e,t,i));let w=[...this.getFullNode({...f,key:y,index:p,wrapper:Re(e.wrapper,f.wrapper)},this.getChildState(t,f),i?`${i}${s.key}`:s.key,n)];for(let m of w){if(m.value=f.value||e.value,m.value&&this.cache.set(m.value,m),e.type&&m.type!==e.type)throw new Error(`Unsupported type <${j(m.type)}> in <${j(n.type)}>. Only <${j(e.type)}> is supported.`);p++,yield m}g=v.next(w)}return}if(e.key==null)return;let r=this,a={type:e.type,props:e.props,key:e.key,parentKey:n?n.key:null,value:e.value,level:n?n.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:re(function*(){if(!e.hasChildNodes)return;let u=0;for(let v of e.childNodes()){v.key!=null&&(v.key=`${a.key}${v.key}`),v.index=u;let p=r.getFullNode(v,r.getChildState(t,v),a.key,a);for(let g of p)u++,yield g}})};yield a}constructor(){this.cache=new WeakMap}}function re(l){let e=[],t=null;return{*[Symbol.iterator](){for(let i of e)yield i;t||(t=l());for(let i of t)e.push(i),yield i}}}function Re(l,e){if(l&&e)return t=>l(e(t));if(l)return l;if(e)return e}function j(l){return l[0].toUpperCase()+l.slice(1)}function $t(l,e,t){let i=d.useMemo(()=>new Ie,[]),{children:n,items:s,collection:r}=l;return d.useMemo(()=>{if(r)return r;let u=i.build({children:n,items:s},t);return e(u)},[i,n,s,r,t,e])}function Be(l,e){return typeof e.getChildren=="function"?e.getChildren(l.key):l.childNodes}function Le(l){return Oe(l,0)}function Oe(l,e){if(e<0)return;let t=0;for(let i of l){if(t===e)return i;t++}}function xt(l){let e;for(let t of l)e=t;return e}function H(l,e,t){if(e.parentKey===t.parentKey)return e.index-t.index;let i=[...oe(l,e),e],n=[...oe(l,t),t],s=i.slice(0,n.length).findIndex((r,a)=>r!==n[a]);return s!==-1?(e=i[s],t=n[s],e.index-t.index):i.findIndex(r=>r===t)>=0?1:(n.findIndex(r=>r===e)>=0,-1)}function oe(l,e){let t=[];for(;(e==null?void 0:e.parentKey)!=null;)e=l.getItem(e.parentKey),t.unshift(e);return t}var he={exports:{}},ye={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z=d;function Ne(l,e){return l===e&&(l!==0||1/l===1/e)||l!==l&&e!==e}var ze=typeof Object.is=="function"?Object.is:Ne,Ue=z.useState,Ve=z.useEffect,qe=z.useLayoutEffect,We=z.useDebugValue;function Ge(l,e){var t=e(),i=Ue({inst:{value:t,getSnapshot:e}}),n=i[0].inst,s=i[1];return qe(function(){n.value=t,n.getSnapshot=e,Y(n)&&s({inst:n})},[l,t,e]),Ve(function(){return Y(n)&&s({inst:n}),l(function(){Y(n)&&s({inst:n})})},[l]),We(t),t}function Y(l){var e=l.getSnapshot;l=l.value;try{var t=e();return!ze(l,t)}catch{return!0}}function je(l,e){return e()}var He=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?je:Ge;ye.useSyncExternalStore=z.useSyncExternalStore!==void 0?z.useSyncExternalStore:He;he.exports=ye;var Ye=he.exports;class X{get childNodes(){throw new Error("childNodes is not supported")}clone(){let e=new X(this.type,this.key);return e.value=this.value,e.level=this.level,e.hasChildNodes=this.hasChildNodes,e.rendered=this.rendered,e.textValue=this.textValue,e["aria-label"]=this["aria-label"],e.index=this.index,e.parentKey=this.parentKey,e.prevKey=this.prevKey,e.nextKey=this.nextKey,e.firstChildKey=this.firstChildKey,e.lastChildKey=this.lastChildKey,e.props=this.props,e}constructor(e,t){this.value=null,this.level=0,this.hasChildNodes=!1,this.rendered=null,this.textValue="",this["aria-label"]=void 0,this.index=0,this.parentKey=null,this.prevKey=null,this.nextKey=null,this.firstChildKey=null,this.lastChildKey=null,this.props={},this.type=e,this.key=t}}class pe{*[Symbol.iterator](){let e=this.firstChild;for(;e;)yield e,e=e.nextSibling}get firstChild(){return this._firstChild}set firstChild(e){this._firstChild=e,this.ownerDocument.markDirty(this)}get lastChild(){return this._lastChild}set lastChild(e){this._lastChild=e,this.ownerDocument.markDirty(this)}get previousSibling(){return this._previousSibling}set previousSibling(e){this._previousSibling=e,this.ownerDocument.markDirty(this)}get nextSibling(){return this._nextSibling}set nextSibling(e){this._nextSibling=e,this.ownerDocument.markDirty(this)}get parentNode(){return this._parentNode}set parentNode(e){this._parentNode=e,this.ownerDocument.markDirty(this)}get isConnected(){var e;return((e=this.parentNode)===null||e===void 0?void 0:e.isConnected)||!1}appendChild(e){this.ownerDocument.startTransaction(),e.parentNode&&e.parentNode.removeChild(e),this.firstChild==null&&(this.firstChild=e),this.lastChild?(this.lastChild.nextSibling=e,e.index=this.lastChild.index+1,e.previousSibling=this.lastChild):(e.previousSibling=null,e.index=0),e.parentNode=this,e.nextSibling=null,this.lastChild=e,this.ownerDocument.markDirty(this),e.hasSetProps&&this.ownerDocument.addNode(e),this.ownerDocument.endTransaction(),this.ownerDocument.queueUpdate()}insertBefore(e,t){if(t==null)return this.appendChild(e);this.ownerDocument.startTransaction(),e.parentNode&&e.parentNode.removeChild(e),e.nextSibling=t,e.previousSibling=t.previousSibling,e.index=t.index,this.firstChild===t?this.firstChild=e:t.previousSibling&&(t.previousSibling.nextSibling=e),t.previousSibling=e,e.parentNode=t.parentNode;let i=t;for(;i;)i.index++,i=i.nextSibling;e.hasSetProps&&this.ownerDocument.addNode(e),this.ownerDocument.endTransaction(),this.ownerDocument.queueUpdate()}removeChild(e){if(e.parentNode!==this)return;this.ownerDocument.startTransaction();let t=e.nextSibling;for(;t;)t.index--,t=t.nextSibling;e.nextSibling&&(e.nextSibling.previousSibling=e.previousSibling),e.previousSibling&&(e.previousSibling.nextSibling=e.nextSibling),this.firstChild===e&&(this.firstChild=e.nextSibling),this.lastChild===e&&(this.lastChild=e.previousSibling),e.parentNode=null,e.nextSibling=null,e.previousSibling=null,e.index=0,this.ownerDocument.removeNode(e),this.ownerDocument.endTransaction(),this.ownerDocument.queueUpdate()}addEventListener(){}removeEventListener(){}constructor(e){this._firstChild=null,this._lastChild=null,this._previousSibling=null,this._nextSibling=null,this._parentNode=null,this.ownerDocument=e}}class V extends pe{get index(){return this._index}set index(e){this._index=e,this.ownerDocument.markDirty(this)}get level(){return this.parentNode instanceof V?this.parentNode.level+(this.node.type==="item"?1:0):0}updateNode(){var e,t,i,n;let s=this.ownerDocument.getMutableNode(this);s.index=this.index,s.level=this.level,s.parentKey=this.parentNode instanceof V?this.parentNode.node.key:null;var r;s.prevKey=(r=(e=this.previousSibling)===null||e===void 0?void 0:e.node.key)!==null&&r!==void 0?r:null;var a;s.nextKey=(a=(t=this.nextSibling)===null||t===void 0?void 0:t.node.key)!==null&&a!==void 0?a:null,s.hasChildNodes=!!this.firstChild;var u;s.firstChildKey=(u=(i=this.firstChild)===null||i===void 0?void 0:i.node.key)!==null&&u!==void 0?u:null;var v;s.lastChildKey=(v=(n=this.lastChild)===null||n===void 0?void 0:n.node.key)!==null&&v!==void 0?v:null}setProps(e,t,i){let n=this.ownerDocument.getMutableNode(this),{value:s,textValue:r,id:a,...u}=e;if(u.ref=t,n.props=u,n.rendered=i,n.value=s,n.textValue=r||(typeof i=="string"?i:"")||e["aria-label"]||"",a!=null&&a!==n.key){if(this.hasSetProps)throw new Error("Cannot change the id of an item");n.key=a}this.hasSetProps||(this.ownerDocument.addNode(this),this.ownerDocument.endTransaction(),this.hasSetProps=!0),this.ownerDocument.queueUpdate()}get style(){return{}}hasAttribute(){}setAttribute(){}setAttributeNS(){}removeAttribute(){}constructor(e,t){super(t),this.nodeType=8,this._index=0,this.hasSetProps=!1,this.node=new X(e,`react-aria-${++t.nodeId}`),this.ownerDocument.startTransaction()}}class Ze{get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}*[Symbol.iterator](){let e=this.firstKey!=null?this.keyMap.get(this.firstKey):void 0;for(;e;)yield e,e=e.nextKey!=null?this.keyMap.get(e.nextKey):void 0}getChildren(e){let t=this.keyMap;return{*[Symbol.iterator](){let i=t.get(e),n=(i==null?void 0:i.firstChildKey)!=null?t.get(i.firstChildKey):null;for(;n;)yield n,n=n.nextKey!=null?t.get(n.nextKey):void 0}}}getKeyBefore(e){let t=this.keyMap.get(e);if(!t)return null;if(t.prevKey!=null){for(t=this.keyMap.get(t.prevKey);t&&t.type!=="item"&&t.lastChildKey!=null;)t=this.keyMap.get(t.lastChildKey);var i;return(i=t==null?void 0:t.key)!==null&&i!==void 0?i:null}return t.parentKey}getKeyAfter(e){let t=this.keyMap.get(e);if(!t)return null;if(t.type!=="item"&&t.firstChildKey!=null)return t.firstChildKey;for(;t;){if(t.nextKey!=null)return t.nextKey;if(t.parentKey!=null)t=this.keyMap.get(t.parentKey);else return null}return null}getFirstKey(){return this.firstKey}getLastKey(){let e=this.lastKey!=null?this.keyMap.get(this.lastKey):null;for(;(e==null?void 0:e.lastChildKey)!=null;)e=this.keyMap.get(e.lastChildKey);var t;return(t=e==null?void 0:e.key)!==null&&t!==void 0?t:null}getItem(e){var t;return(t=this.keyMap.get(e))!==null&&t!==void 0?t:null}at(){throw new Error("Not implemented")}clone(){let e=this.constructor,t=new e;return t.keyMap=new Map(this.keyMap),t.firstKey=this.firstKey,t.lastKey=this.lastKey,t}addNode(e){if(this.frozen)throw new Error("Cannot add a node to a frozen collection");this.keyMap.set(e.key,e)}removeNode(e){if(this.frozen)throw new Error("Cannot remove a node to a frozen collection");this.keyMap.delete(e)}commit(e,t,i=!1){if(this.frozen)throw new Error("Cannot commit a frozen collection");this.firstKey=e,this.lastKey=t,this.frozen=!i}constructor(){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.frozen=!1}}class Je extends pe{get isConnected(){return!0}createElement(e){return new V(e,this)}getMutableNode(e){let t=e.node;return this.mutatedNodes.has(e)||(t=e.node.clone(),this.mutatedNodes.add(e),e.node=t),this.markDirty(e),t}getMutableCollection(){return!this.isSSR&&!this.collectionMutated&&(this.collection=this.collection.clone(),this.collectionMutated=!0),this.collection}markDirty(e){this.dirtyNodes.add(e)}startTransaction(){this.transactionCount++}endTransaction(){this.transactionCount--}addNode(e){let t=this.getMutableCollection();if(!t.getItem(e.node.key)){t.addNode(e.node);for(let i of e)this.addNode(i)}this.markDirty(e)}removeNode(e){for(let i of e)this.removeNode(i);this.getMutableCollection().removeNode(e.node.key),this.markDirty(e)}getCollection(){return this.transactionCount>0?this.collection:(this.updateCollection(),this.collection)}updateCollection(){for(let s of this.dirtyNodes)s instanceof V&&s.isConnected&&s.updateNode();if(this.dirtyNodes.clear(),this.mutatedNodes.size||this.collectionMutated){var e,t;let s=this.getMutableCollection();for(let r of this.mutatedNodes)r.isConnected&&s.addNode(r.node);var i,n;s.commit((i=(e=this.firstChild)===null||e===void 0?void 0:e.node.key)!==null&&i!==void 0?i:null,(n=(t=this.lastChild)===null||t===void 0?void 0:t.node.key)!==null&&n!==void 0?n:null,this.isSSR),this.mutatedNodes.clear()}this.collectionMutated=!1}queueUpdate(){if(!(this.dirtyNodes.size===0||this.transactionCount>0))for(let e of this.subscriptions)e()}subscribe(e){return this.subscriptions.add(e),()=>this.subscriptions.delete(e)}resetAfterSSR(){this.isSSR&&(this.isSSR=!1,this.firstChild=null,this.lastChild=null,this.nodeId=0)}constructor(e){super(null),this.nodeType=11,this.ownerDocument=this,this.dirtyNodes=new Set,this.isSSR=!1,this.nodeId=0,this.nodesByProps=new WeakMap,this.mutatedNodes=new Set,this.subscriptions=new Set,this.transactionCount=0,this.collection=e,this.collectionMutated=!0}}function Qe(l){let{children:e,items:t,idScope:i,addIdAndValue:n,dependencies:s=[]}=l,r=d.useMemo(()=>new WeakMap,s);return d.useMemo(()=>{if(t&&typeof e=="function"){let v=[];for(let p of t){let g=r.get(p);if(!g){g=e(p);var a,u;let f=(u=(a=g.props.id)!==null&&a!==void 0?a:p.key)!==null&&u!==void 0?u:p.id;if(f==null)throw new Error("Could not determine key for item");i&&(f=i+":"+f),g=d.cloneElement(g,n?{key:f,id:f,value:p}:{key:f}),r.set(p,g)}v.push(g)}return v}else if(typeof e!="function")return e},[e,t,r,i,n])}function _(l){return Qe({...l,addIdAndValue:!0})}const ve=d.createContext(!1);function wt(l,e){let{collection:t,document:i}=et(e);return{portal:ge(l,i),collection:t}}function Xe(l,e,t){let i=ue(),n=d.useRef(i);n.current=i;let s=d.useCallback(()=>n.current?t():e(),[e,t]);return Ye.useSyncExternalStore(l,s)}const _e=typeof x.useSyncExternalStore=="function"?x.useSyncExternalStore:Xe;function et(l){let e=d.useMemo(()=>new Je(l||new Ze),[l]),t=d.useCallback(r=>e.subscribe(r),[e]),i=d.useCallback(()=>{let r=e.getCollection();return e.isSSR&&e.resetAfterSSR(),r},[e]),n=d.useCallback(()=>(e.isSSR=!0,e.getCollection()),[e]);return{collection:_e(t,i,n),document:e}}const Q=d.createContext(null),tt=d.createContext(null);function ge(l,e){let t=d.useContext(tt),i=e??t,n=_(l),s=d.useMemo(()=>x.createElement(ve.Provider,{value:!0},n),[n]);return ue()?x.createElement(Q.Provider,{value:i},s):ae.createPortal(s,i)}function Ct(l){return x.createElement(x.Fragment,null,ge(l))}function kt(l,e,t){let i=d.useContext(ve);var n;return i?(n=me(l,e,t,"children"in e?e.children:null))!==null&&n!==void 0?n:x.createElement(x.Fragment,null):null}function it(l,e,t){return d.useCallback(i=>{i==null||i.setProps(l,e,t)},[l,e,t])}function me(l,e,t,i,n){let s=it(e,t,i),r=d.useContext(Q);if(r){let a=r.ownerDocument.nodesByProps.get(e);return a||(a=r.ownerDocument.createElement(l),a.setProps(e,t,i),r.appendChild(a),r.ownerDocument.updateCollection(),r.ownerDocument.nodesByProps.set(e,a)),n?x.createElement(Q.Provider,{value:a},n):null}return x.createElement(l,{ref:s},n)}function lt(l,e){let t=_(l);return me("section",l,e,null,t)}const Dt=d.forwardRef(lt),nt=d.createContext(null),st=d.createContext(null);function Pt(l){let e=d.useContext(nt);l=W(e,l),l.dependencies=((e==null?void 0:e.dependencies)||[]).concat(l.dependencies);let t=typeof l.children=="function"?l.children:null;return x.createElement(st.Provider,{value:t},_(l))}class k extends Set{constructor(e,t,i){super(e),e instanceof k?(this.anchorKey=t||e.anchorKey,this.currentKey=i||e.currentKey):(this.anchorKey=t,this.currentKey=i)}}function rt(l,e){if(l.size!==e.size)return!1;for(let t of l)if(!e.has(t))return!1;return!0}function Et(l){let{selectionMode:e="none",disallowEmptySelection:t,allowDuplicateSelectionEvents:i,selectionBehavior:n="toggle",disabledBehavior:s="all"}=l,r=d.useRef(!1),[,a]=d.useState(!1),u=d.useRef(null),v=d.useRef(null),[,p]=d.useState(null),g=d.useMemo(()=>ce(l.selectedKeys),[l.selectedKeys]),f=d.useMemo(()=>ce(l.defaultSelectedKeys,new k),[l.defaultSelectedKeys]),[y,D]=Pe(g,f,l.onSelectionChange),w=d.useMemo(()=>l.disabledKeys?new Set(l.disabledKeys):new Set,[l.disabledKeys]),[m,P]=d.useState(n);n==="replace"&&m==="toggle"&&typeof y=="object"&&y.size===0&&P("replace");let b=d.useRef(n);return d.useEffect(()=>{n!==b.current&&(P(n),b.current=n)},[n]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:m,setSelectionBehavior:P,get isFocused(){return r.current},setFocused(K){r.current=K,a(K)},get focusedKey(){return u.current},get childFocusStrategy(){return v.current},setFocusedKey(K,E="first"){u.current=K,v.current=E,p(K)},selectedKeys:y,setSelectedKeys(K){(i||!rt(K,y))&&D(K)},disabledKeys:w,disabledBehavior:s}}function ce(l,e){return l?l==="all"?"all":new k(l):e}class Mt{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){return this.state.selectionMode==="none"?!1:(e=this.getKey(e),this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(i=>t.has(i)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let i=this.collection.getItem(t);(!e||i&&H(this.collection,i,e)<0)&&(e=i)}return e==null?void 0:e.key}get lastSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let i=this.collection.getItem(t);(!e||i&&H(this.collection,i,e)>0)&&(e=i)}return e==null?void 0:e.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}e=this.getKey(e);let t;if(this.state.selectedKeys==="all")t=new k([e],e,e);else{let i=this.state.selectedKeys,n=i.anchorKey||e;t=new k(i,n,e);for(let s of this.getKeyRange(n,i.currentKey||e))t.delete(s);for(let s of this.getKeyRange(e,n))this.canSelectItem(s)&&t.add(s)}this.state.setSelectedKeys(t)}getKeyRange(e,t){let i=this.collection.getItem(e),n=this.collection.getItem(t);return i&&n?H(this.collection,i,n)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){let i=[],n=e;for(;n;){let s=this.collection.getItem(n);if((s&&s.type==="item"||s.type==="cell"&&this.allowsCellSelection)&&i.push(n),n===t)return i;n=this.collection.getKeyAfter(n)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}if(e=this.getKey(e),e==null)return;let t=new k(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);t.has(e)?t.delete(e):this.canSelectItem(e)&&(t.add(e),t.anchorKey=e,t.currentKey=e),!(this.disallowEmptySelection&&t.size===0)&&this.state.setSelectedKeys(t)}replaceSelection(e){if(this.selectionMode==="none"||(e=this.getKey(e),e==null))return;let t=this.canSelectItem(e)?new k([e],e,e):new k;this.state.setSelectedKeys(t)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new k;for(let i of e)if(i=this.getKey(i),i!=null&&(t.add(i),this.selectionMode==="single"))break;this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=i=>{for(;i;){if(this.canSelectItem(i)){let n=this.collection.getItem(i);n.type==="item"&&e.push(i),n.hasChildNodes&&(this.allowsCellSelection||n.type!=="item")&&t(Le(Be(n,this.collection)).key)}i=this.collection.getKeyAfter(i)}};return t(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new k)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;for(let i of t)if(!e.has(i))return!1;return!0}canSelectItem(e){var t;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let i=this.collection.getItem(e);return!(!i||!(i==null||(t=i.props)===null||t===void 0)&&t.isDisabled||i.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){var t,i;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(e)||!!(!((i=this.collection.getItem(e))===null||i===void 0||(t=i.props)===null||t===void 0)&&t.isDisabled))}isLink(e){var t,i;return!!(!((i=this.collection.getItem(e))===null||i===void 0||(t=i.props)===null||t===void 0)&&t.href)}getItemProps(e){var t;return(t=this.collection.getItem(e))===null||t===void 0?void 0:t.props}constructor(e,t,i){this.collection=e,this.state=t;var n;this.allowsCellSelection=(n=i==null?void 0:i.allowsCellSelection)!==null&&n!==void 0?n:!1,this._isSelectAll=null}}export{Dt as $,Et as a,$t as b,Mt as c,bt as d,Be as e,kt as f,Kt as g,tt as h,Ct as i,wt as j,Qe as k,me as l,Pt as m,Te as n,et as o,Me as p,Oe as q,xt as r,Le as s,_ as t,st as u,nt as v,Ze as w,X as x};
