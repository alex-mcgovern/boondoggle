import {
    ArgTypes,
    Canvas,
    Controls,
    Meta,
    Story,
    Source,
    Description,
} from "@storybook/blocks";

import { TextField } from ".";
import * as stories from "./stories.tsx";

<Meta of={stories} />

# TextField

<Description of={TextField} />

## Usage

### Basic usage

`TextField` is built with composition in mind â€” meaning that you need to combine
it withother components like `Label`, `Input`, `FieldError`, etc. to create a
complete form field.

<Canvas
    sourceState="shown"
    of={stories.Default}
/>

### Validation

You can mark the field as invalid by passing the `isInvalid` prop. This will
apply the red `colorOverlay` to the field.

Additionally, you can provide an error message to be displayed below the field
using the `FieldError` component.

**Note**: The `FieldError` may also be used without any children, in the context
of a `Form` component, in which case you can pass an object of errors to the
`Form`.

<Canvas
    sourceState="shown"
    of={stories.InvalidWithError}
/>

### Adding a "copy" button

A useful feature is a dedicated "copy" button that allows the user to copy the
value of the field to the clipboard. This can be achieved by composing the
`TextField` with a `TextFieldCopyButton` component. Under the hood, the
`TextFieldCopyButton` leverages the `slot` pattern from React Aria.
[(documentation)](https://react-spectrum.adobe.com/react-aria/advanced.html#slots).

This interaction will trigger user feedback in the form of a toast message.

**Note:** Due to the fact that a html `<input>` doesn't support any child
elements, the button is rendered as a sibling to the input, and wrapped with a
`Group` component. In this scenario, the `Input` can be passed
`variant="unstyled"` to remove the border and related styles.

<Canvas
    sourceState="shown"
    of={stories.CopyButton}
/>

### Adding a "clear" button

If you need to allow the user to clear the value of the field, you can compose
the `TextField` with a `TextFieldClearButton` component. Under the hood, the
`TextFieldClearButton` leverages the `slot` pattern from React Aria.
[(documentation)](https://react-spectrum.adobe.com/react-aria/advanced.html#slots).

<Canvas
    sourceState="shown"
    of={stories.ClearButton}
/>

### Adding a description

To add a description to the field, you can use the `FieldDescription` component.

<Canvas
    sourceState="shown"
    of={stories.Description}
/>

### Adding a "toggle visiblity" button

For password fields, or other secret fields, you can compose an input with a
button to toggle visibility. Under the hood, the `TextFieldVisibilityButton`
leverages the `slot` pattern from React Aria.
[(documentation)](https://react-spectrum.adobe.com/react-aria/advanced.html#slots)

**Note:** Due to the fact that a html `<input>` doesn't support any child
elements, the button is rendered as a sibling to the input, and wrapped with a
`Group` component. In this scenario, the `Input` can be passed
`variant="unstyled"` to remove the border and related styles.

**Note:** This implementation uses the `password` type for the input to leverage
native masking of the value, meaning password managers will pick this up as a
password field.

<Canvas
    sourceState="shown"
    of={stories.Visibilty}
/>

### Adding a tooltip

A common UI pattern is to provide additional information about a field, such as
formatting requirements or examples. This can be done by adding a `Tooltip`
component to the label.

<Canvas
    sourceState="shown"
    of={stories.LabelTooltip}
/>
